# Nx + Storybook with Vite

<a alt="Nx logo" href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨

## Building this workspace

Running the comment with `--packageManager=yarn` option will be failed at the moment.
Thus, using `npm` instead.

```sh
npx create-nx-workspace@latest nx-vite-storybook

✔ Choose what to create                 · integrated
✔ What to create in the new workspace   · react-monorepo
✔ Application name                      · admin
✔ Bundler to be used to build the application · vite
✔ Default stylesheet format             · @emotion/styled
✔ Enable distributed caching to make your CI faster · Yes
```

Install a component library.

```sh
npm install @mui/material @emotion/react @emotion/styled
```

Add a new workspace for components.
Update `npmScope` in `nx.json` if you want to rename alias. Or another option is using `--importPath=[ALIAS_NAME]`.

```sh
npx nx g @nrwl/react:lib components

✔ What unit test runner should be used? · jest
✔ Which bundler would you like to use to build the library? Choose 'none' to skip build setup. · vite
```

If you want to extend types, create `xxx.d.ts` files and refer them from typeRoots in `tsconfig.base.json`. In this workspace, using `createPalette.d.ts`, `createTheme.d.ts` and `styled.d.ts`.

Set up for Storybook with Vite. https://nx.dev/recipes/storybook/one-storybook-for-all

```sh
npm install --save-dev @nrwl/storybook

npx nx g @nrwl/react:lib storybook-host

✔ What unit test runner should be used? · jest
✔ Which bundler would you like to use to build the library? Choose 'none' to skip build setup. · vite

npx nx g @nrwl/storybook:configuration storybook-host

✔ Configure a cypress e2e app to run against the storybook instance? (y/N) · false
✔ Which Storybook builder do you want to use? · vite
```

Update `stories` in `libs/storybook-host/.storybook/main.js` and `libs/storybook-host/.storybook/tsconfig.json`.

Serve or build Storybook.

```sh
npx nx storybook storybook-host

# or

npx nx build-storybook storybook-host
```

## Serve App

Run `nx serve admin` for a dev server. Navigate to http://localhost:4200/. The app will automatically reload if you change any of the source files.

## Understand this workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## Further help

Visit the [Nx Documentation](https://nx.dev) to learn more.
